From 8175ae30332ad8f8d6afdd93c093aca130b54ca6 Mon Sep 17 00:00:00 2001
From: Tomaz Cerar <tomaz.cerar@gmail.com>
Date: Mon, 9 Sep 2013 12:27:39 +0200
Subject: [PATCH] Upgrade to latest logging processors and maven plugins.

---
 pom.xml                                            | 89 ++++++++--------------
 .../annotations/common/util/impl/Log.java          |  8 +-
 2 files changed, 35 insertions(+), 62 deletions(-)

diff --git a/pom.xml b/pom.xml
index 980b9d2..f64a4d7 100644
--- a/pom.xml
+++ b/pom.xml
@@ -21,7 +21,8 @@
   ~  51 Franklin Street, Fifth Floor
   ~  Boston, MA  02110-1301  USA
   -->
-<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
+<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
 
     <modelVersion>4.0.0</modelVersion>
 
@@ -103,8 +104,13 @@
     </scm>
 
     <properties>
-        <jbossLoggingVersion>3.1.0.CR2</jbossLoggingVersion>
-        <jbossLoggingProcessorVersion>1.0.0.CR5</jbossLoggingProcessorVersion>
+        <version.org.jboss.logging.jboss-logging>3.1.3.GA</version.org.jboss.logging.jboss-logging>
+        <version.org.jboss.logging.jboss-logging-tools>1.2.0.Beta1</version.org.jboss.logging.jboss-logging-tools>
+        <version.jar.plugin>2.4</version.jar.plugin>
+        <version.source.plugin>2.2.1</version.source.plugin>
+        <version.compiler.plugin>3.1</version.compiler.plugin>
+        <version.bundle.plugin>2.3.7</version.bundle.plugin>
+        <version.injection.plugin>1.0.2</version.injection.plugin>
         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
     </properties>
 
@@ -112,13 +118,26 @@
         <dependency>
             <groupId>org.jboss.logging</groupId>
             <artifactId>jboss-logging</artifactId>
-            <version>${jbossLoggingVersion}</version>
+            <version>${version.org.jboss.logging.jboss-logging}</version>
+        </dependency>
+        <dependency>
+            <groupId>org.jboss.logging</groupId>
+            <artifactId>jboss-logging-annotations</artifactId>
+            <version>${version.org.jboss.logging.jboss-logging-tools}</version>
+            <scope>provided</scope>
+        </dependency>
+
+        <dependency>
+            <groupId>org.jboss.logging</groupId>
+            <artifactId>jboss-logging-processor</artifactId>
+            <version>${version.org.jboss.logging.jboss-logging-tools}</version>
+            <scope>provided</scope>
         </dependency>
         <!-- test-scoped dependencies for common testing dependencies -->
         <dependency>
             <groupId>junit</groupId>
             <artifactId>junit</artifactId>
-            <version>3.8.1</version>
+            <version>4.11</version>
             <scope>test</scope>
         </dependency>
         <!-- / test-scoped dependencies for common testing dependencies -->
@@ -142,7 +161,7 @@
             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-source-plugin</artifactId>
-                <version>2.1.2</version>
+                <version>${version.source.plugin}</version>
                 <executions>
                     <execution>
                         <id>attach-sources</id>
@@ -156,6 +175,7 @@
             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-jar-plugin</artifactId>
+                <version>${version.jar.plugin}</version>
                 <configuration>
                     <archive>
                         <manifestFile>${basedir}/target/classes/META-INF/MANIFEST.MF</manifestFile>
@@ -191,10 +211,11 @@
             <plugin>
                 <groupId>org.apache.felix</groupId>
                 <artifactId>maven-bundle-plugin</artifactId>
+                <version>${version.bundle.plugin}</version>
                 <extensions>true</extensions>
                 <configuration>
                     <instructions>
-                        <Bundle-SymbolicName>${pom.groupId}.${pom.artifactId}</Bundle-SymbolicName>
+                        <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>
                         <Bundle-Name>${project.name}</Bundle-Name>
                         <Bundle-Version>${project.version}</Bundle-Version>
                         <Export-Package>
@@ -215,7 +236,7 @@
             <plugin>
                 <groupId>org.jboss.maven.plugins</groupId>
                 <artifactId>maven-injection-plugin</artifactId>
-                <version>1.0.2</version>
+                <version>${version.injection.plugin}</version>
                 <executions>
                     <execution>
                         <phase>compile</phase>
@@ -240,62 +261,14 @@
             </plugin>
             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
-                <artifactId>maven-jar-plugin</artifactId>
-                <version>2.3.1</version>
-            </plugin>
-            <plugin>
-                <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-compiler-plugin</artifactId>
-                <version>2.3.2</version>
+                <version>${version.compiler.plugin}</version>
                 <configuration>
                     <source>1.6</source>
                     <target>1.6</target>
                     <encoding>UTF-8</encoding>
                 </configuration>
             </plugin>
-            <plugin>
-                <groupId>org.bsc.maven</groupId>
-                <artifactId>maven-processor-plugin</artifactId>
-                <version>2.0.2</version>
-                <executions>
-                    <!-- Run annotation processors on src/main/java sources -->
-                    <execution>
-                        <id>process</id>
-                        <goals>
-                            <goal>process</goal>
-                        </goals>
-                        <phase>generate-sources</phase>
-                        <configuration>
-                            <compilerArguments>-AloggingVersion=3.0 -AtranslationFilesPath=${project.basedir}/src/main/resources/ -source 1.6 -target 1.6</compilerArguments>
-                            <processors>
-                                <processor>org.jboss.logging.generator.apt.LoggingToolsProcessor</processor>
-                            </processors>
-                        </configuration>
-                    </execution>
-                    <!-- Run annotation processors on src/test/java sources -->
-                    <execution>
-                        <id>process-test</id>
-                        <goals>
-                            <goal>process-test</goal>
-                        </goals>
-                        <phase>generate-test-sources</phase>
-                        <configuration>
-                            <compilerArguments>-AloggingVersion=3.0 -AtranslationFilesPath=${project.basedir}/src/main/resources/ -source 1.6 -target 1.6</compilerArguments>
-                            <processors>
-                                <processor>org.jboss.logging.generator.apt.LoggingToolsProcessor</processor>
-                            </processors>
-                        </configuration>
-                    </execution>
-                </executions>
-                <dependencies>
-                    <dependency>
-                        <groupId>org.jboss.logging</groupId>
-                        <artifactId>jboss-logging-processor</artifactId>
-                        <version>${jbossLoggingProcessorVersion}</version>
-                        <scope>compile</scope>
-                    </dependency>
-                </dependencies>
-            </plugin>
         </plugins>
         <pluginManagement>
             <plugins>
@@ -323,7 +296,7 @@
                                         </goals>
                                     </pluginExecutionFilter>
                                     <action>
-                                        <ignore />
+                                        <ignore/>
                                     </action>
                                 </pluginExecution>
                             </pluginExecutions>
diff --git a/src/main/java/org/hibernate/annotations/common/util/impl/Log.java b/src/main/java/org/hibernate/annotations/common/util/impl/Log.java
index 0c24cbf..2e79de9 100644
--- a/src/main/java/org/hibernate/annotations/common/util/impl/Log.java
+++ b/src/main/java/org/hibernate/annotations/common/util/impl/Log.java
@@ -21,10 +21,10 @@
 package org.hibernate.annotations.common.util.impl;
 
 import org.jboss.logging.BasicLogger;
-import org.jboss.logging.Cause;
-import org.jboss.logging.LogMessage;
-import org.jboss.logging.Message;
-import org.jboss.logging.MessageLogger;
+import org.jboss.logging.annotations.Cause;
+import org.jboss.logging.annotations.LogMessage;
+import org.jboss.logging.annotations.Message;
+import org.jboss.logging.annotations.MessageLogger;
 
 import static org.jboss.logging.Logger.Level.*;
 
-- 
1.8.4

